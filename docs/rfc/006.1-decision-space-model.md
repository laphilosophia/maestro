# RFC-6.1: Decision Space Model

**Subtitle:** A Three-Dimensional Constraint Space for Admission and Selection

## Status

- **Type:** Normative Addendum
- **Extends:** RFC-6 (Circuit Distributor), RFC-7 (Decision Envelope)
- **Scope:** Decision topology & traversal model
- **Version:** v1.0

---

## 1. Purpose

This document defines the **Decision Space Model** used by Maestro to reason about task admission, recycling, and candidate selection.

The model formalizes decision-making as traversal within a **three-dimensional constraint space**, rather than as a linear or hierarchical decision pipeline.

This RFC does NOT introduce new runtime behavior.
It **names and constrains** behavior already implied by RFC-6 and RFC-7.

---

## 2. Decision Space Overview

All admission and selection decisions occur within a **3D decision space** defined by three orthogonal axes:

```
Decision Space =
  Envelope Axis   (static policy constraints)
× Runtime Axis    (task-local lifecycle state)
× Pressure Axis   (system-wide dynamics)
```

Each admission attempt corresponds to a **single coordinate** within this space.

---

## 3. The Three Axes

### 3.1 Envelope Axis (X-axis)

Defined by **RFC-7 Decision Envelopes**.

Characteristics:

- Static
- Build-time defined
- Immutable at runtime
- Policy-only

Envelope axis determines:

- Which decisions are admissible
- Which candidates are eligible
- Which behaviors are categorically forbidden

**Rule:**

> The Envelope axis defines the _maximum admissible decision subspace_.
> It never changes across task recycling.

**Caching Rule:**

> Only the Envelope axis is eligible for caching.

---

### 3.2 Runtime Axis (Y-axis)

Defined by `TaskRuntimeState` and related ephemeral structures.

Represents task-local evolution across time:

- retry count
- history influence
- TTL
- recycling state
- admission attempts

Runtime axis:

- Is mutable
- Advances on each admission attempt
- Is reset only by task disposal
- Is sampled, never cached

**Rule:**

> Recycling a task re-enters the decision space
> with the same Envelope coordinate
> but a different Runtime coordinate.

**Structural Clarification (NORMATIVE):**

> The Runtime axis represents task-local lifecycle semantics.
> These semantics MAY be distributed across:
>
> - TaskRuntimeState
> - Core-owned ephemeral memory
> - Admission-local counters
>
> RFC-6 TaskRuntimeState is a **minimum structural carrier**,
> not an exhaustive representation of the Runtime axis.

**History Influence Clarification (NORMATIVE):**

> History influence belongs to the Runtime axis conceptually,
> but its data MAY reside outside TaskRuntimeState.
>
> Implementations MUST treat history as runtime-local and non-policy,
> regardless of its physical storage location.

---

### 3.3 Pressure Axis (Z-axis)

Defined by `PressureSignal`.

Represents system-wide, non-task-specific dynamics:

- load
- saturation
- resource contention
- systemic bias

Pressure axis:

- Is external to the task
- May change independently of task lifecycle
- Is sampled, never mutated
- Is sampled, never cached

**Rule:**

> Pressure influences _which admissible decision is selected_,
> never _which decisions are admissible_.

**Axis Priority Rule (NORMATIVE):**

> Pressure MUST NOT override Runtime constraints.
>
> - Runtime axis → defines _what is possible_
> - Pressure axis → defines _what is preferable_
>
> Preference never trumps possibility.

---

## 4. Coordinate Semantics

A decision attempt operates at a coordinate:

```
(envelope, runtimeState, pressure)
```

This coordinate:

- Is ephemeral
- Is not stored
- Is re-evaluated on each admission attempt

Two attempts are considered **distinct** if **any axis differs**.

---

## 5. Circuit Distributor as Space Traversal Engine

The `CircuitDistributor` is the **only component** authorized to traverse the decision space.

Signature (RFC-7):

```ts
select(
  task: Task,
  envelope: DecisionEnvelope,
  runtimeState: TaskRuntimeState,
  pressure: PressureSignal
): SubRoutineGroup | null
```

This signature explicitly binds the distributor to all three axes.

**Rule:**

> CircuitDistributor MUST treat its inputs
> as coordinates, not parameters.

---

## 6. Traversal Order (Normative)

Traversal follows a strict order:

### 0. Envelope Drop Gate

If `envelope.allowDrop === false`, drop decision MUST NOT be considered at any later stage.

Drop is policy-gated. Pressure may influence drop **only if** envelope permits.

### 1. Envelope Constraint Application

Candidate universe is narrowed to `envelope.eligibleCandidates`.

### 2. Runtime-Aware Filtering

Retry depth, history effects, TTL, and recycling state are applied.

### 3. Pressure Biasing

Pressure influences selection _within_ the remaining admissible set.

**Rule:**

> This order MUST NOT be inverted.

---

## 7. Task Recycling Semantics

Task recycling is modeled as **re-entry into the same decision space**.

Formally:

```
Initial admission:
  (E, R₀, P₀)

Recycled admission:
  (E, R₁, P₁)
```

Where:

- `E` is identical
- `R₁ ≠ R₀`
- `P₁` may differ

**Rule:**

> Recycling MUST NOT change the Envelope axis.
> Any policy change requires a new task.

---

## 8. Performance Implications (Normative)

Because the Envelope axis is static:

- Eligible candidate sets are:

  - pre-computable
  - cacheable
  - small

Therefore:

- Selection operates in **O(k)**
  where `k = envelope.eligibleCandidates.length`
- Not **O(N)** over the full registry

**Rule:**

> Any implementation that re-scans the full candidate registry
> during selection is non-compliant.

**Enforcement Clarification (NORMATIVE):**

> Compliance with this constraint is architectural, not observational.
>
> Implementations MUST structure candidate selection such that:
>
> - The full CandidateRegistry is never iterated during selection
> - All selection operates on an envelope-bounded subset
>
> Static analysis, code review, or architectural guarantees are sufficient
> for compliance.

---

## 9. Strategy Constraints

Strategies operate **inside** the decision space but do not define it.

Strategy limitations:

- MUST NOT alter axes
- MUST NOT infer policy
- MUST NOT reinterpret envelope flags

Strategy receives a **bounded subspace**, not the full space.

---

## 10. Single Intent Rule (NORMATIVE)

> A Task represents a single admission intent.
>
> Tasks with multiple semantic intents MUST be decomposed into
> multiple tasks, each resolved against its own envelope.

This rule prevents:

- Envelope resolution ambiguity
- Default envelope abuse
- Multi-intent coordination within Maestro

Work requiring multiple intents belongs to the caller, not Maestro.

---

## 11. Non-Goals

This RFC does NOT define:

- New envelope fields
- New runtime state fields
- New pressure semantics
- Alternative traversal orders
- Multi-envelope traversal

---

## 12. Summary

- Decision-making is modeled as traversal in a 3D space
- Envelope defines static boundaries
- Runtime defines lifecycle position
- Pressure defines systemic bias
- Recycling is re-entry, not reset
- Performance gains come from axis separation
- Drop is policy-gated, not pressure-gated
- Single intent per task is mandatory

> **If the Envelope axis moves at runtime,
> the decision space collapses.**

---

## RFC-6.1 Status

**Accepted as normative addendum — v1.0**

No breaking changes introduced.
Provides formal model and terminology only.
